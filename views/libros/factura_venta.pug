extends ../layout

block content
  .banner
    img(src="/img/banner-libreria.webp" alt="Banner librería" class="banner-img")
    .bienvenida-box
      h2 Factura de Venta
      p(style="margin-bottom:0;")
        | Detalle de la venta seleccionada
  .factura-oficial(style="border:1px solid #888;padding:24px 32px 24px 32px;margin:32px auto;max-width:800px;border-radius:10px;background:#fff;box-shadow:0 2px 12px rgba(60,60,60,0.07);")
    .factura-header(style="display:flex;justify-content:space-between;align-items:center;")
      .factura-logo
        h2(style="margin:0;font-size:2em;") El Lector Voraz
        p(style="margin:0;font-size:1.1em;") ARCA
      .factura-datos
        h3(style="margin:0 0 8px 0;") FACTURA B
        p(style="margin:0;") Fecha de Emisión: #{new Date().toLocaleString('es-AR', { day: 'numeric', month: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' })}
        p(style="margin:0;") N° de Venta: #{venta._id ? venta._id.toString() : (venta.id ? venta.id.toString() : 'No disponible')}
        p(style="margin:0;") Cliente: Consumidor Final
    hr
    .factura-info(style="margin-bottom:16px;")
      p(style="margin:0;") <b>Libro:</b> #{venta.titulo}
      p(style="margin:0;") <b>Autor:</b> #{venta.autor}
      p(style="margin:0;") <b>Género:</b> #{venta.genero}
    table(style="width:100%;margin-top:16px;border-collapse:collapse;")
      thead
        tr
          th(style="border-bottom:1px solid #888;padding:6px 0;") Cantidad
          th(style="border-bottom:1px solid #888;padding:6px 0;") Precio Unitario
          th(style="border-bottom:1px solid #888;padding:6px 0;") Subtotal
      tbody
        tr
          td(style="text-align:center;padding:6px 0;") #{venta.cantidad}
          td(style="text-align:center;padding:6px 0;") $#{venta.precio}
          td(style="text-align:center;padding:6px 0;") $#{venta.ingresos}
    .factura-footer(style="margin-top:24px;text-align:center;font-size:0.95em;color:#555;")
      p(style="margin:0;") Comprobante generado por ARCA - El Lector Voraz
      p(style="margin:0;") Gracias por su compra
    button.button(type="button" onclick="window.print()" style="margin-top:24px;") Imprimir
  script.
    // Oculta elementos no deseados al imprimir
    window.onbeforeprint = function() {
      document.querySelector('.banner').style.display = 'none';
    };
    window.onafterprint = function() {
      document.querySelector('.banner').style.display = '';
    };
  footer
    hr
    p Trabajo Integrador 2° entrega  – Desarrollo Web Backend – IFTS 29
    p Grupo "El Quinto Elemento" -  Clausi, Descosido, Gill
